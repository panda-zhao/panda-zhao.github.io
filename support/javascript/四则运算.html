<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      console.log(0.1 + 0.2) //输出 0.30000000000000004
      console.log(1 - 0.8) //输出 0.19999999999999996
      console.log(6 * 0.7) //输出 4.199999999999999
      console.log(1.2 / 0.2) //输出 5.999999999999999

      accAdd(0.1, 0.2) // 0.1, 0.2 = 0.3
      accSub(1, 0.8) // 0.2
      accMul(6, 0.7) // 4.2
      accDiv(1.2, 0.2) // 6
      // 加
      function accAdd(arg1, arg2) {
        if (typeof arg1 !== 'number' || typeof arg2 !== 'number') {
          console.log('parameter Must be a number')
          return
        }
        let float1 =
          parseInt(arg1) === arg1 ? 0 : arg1.toString().split('.')[1].length
        let float2 =
          parseInt(arg2) === arg2 ? 0 : arg2.toString().split('.')[1].length
        let m = Math.pow(10, Math.max(float1, float2))
        let result = (arg1 * m + arg2 * m) / m
        console.log(`加法计算： ${arg1} + ${arg2} = ${result}`)
        return result
      }
      // 减
      function accSub(arg1, arg2) {
        if (typeof arg1 !== 'number' || typeof arg2 !== 'number') {
          console.log('parameter Must be a number')
          return
        }
        let float1 =
          parseInt(arg1) === arg1 ? 0 : arg1.toString().split('.')[1].length
        let float2 =
          parseInt(arg2) === arg2 ? 0 : arg2.toString().split('.')[1].length
        let m = Math.pow(10, Math.max(float1, float2))
        let result = (arg1 * m - arg2 * m) / m
        console.log(`减法计算： ${arg1} - ${arg2} = ${result}`)
        return result
      }

      // 乘
      function accMul(arg1, arg2) {
        if (typeof arg1 !== 'number' || typeof arg2 !== 'number') {
          console.log('parameter Must be a number')
          return
        }
        let float1 =
          parseInt(arg1) === arg1 ? 0 : arg1.toString().split('.')[1].length
        let float2 =
          parseInt(arg2) === arg2 ? 0 : arg2.toString().split('.')[1].length
        let r1 = Number(arg1.toString().replace('.', ''))
        let r2 = Number(arg2.toString().replace('.', ''))

        let result = (r1 * r2) / Math.pow(10, float1 + float2)
        console.log(`乘法计算： ${arg1} * ${arg2} = ${result}`)
        return result
      }

      // 除
      function accDiv(arg1, arg2) {
        let result = 0
        if (typeof arg1 !== 'number' || typeof arg2 !== 'number') {
          console.log('parameter Must be a number')
          return
        }
        // 0除以任何数都为0
        if (arg1 !== 0 && arg2 !== 0) {
          let float1 =
            parseInt(arg1) === arg1 ? 0 : arg1.toString().split('.')[1].length
          let float2 =
            parseInt(arg2) === arg2 ? 0 : arg2.toString().split('.')[1].length

          let r1 = Number(arg1.toString().replace('.', ''))
          let r2 = Number(arg2.toString().replace('.', ''))
          result = (r1 / r2) * Math.pow(10, float2 - float1)
        } else {
          result = 0
        }
        console.log(`除法计算： ${arg1} / ${arg2} = ${result}`)
        return result
      }
    </script>
  </body>
</html>
