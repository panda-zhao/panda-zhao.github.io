<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URL编码与解码</title>
    <style>
      button {
        display: block;
        margin: 15px 0;
        padding: 15px 50px;
        font-size: 16px;
        letter-spacing: 1px;
        color: #fff;
        background: rgb(33, 99, 224);
        background: linear-gradient(
          90deg,
          rgba(33, 99, 224, 1) 25%,
          rgba(253, 29, 29, 0.9920343137254902) 75%
        );
        border-radius: 4px;
        border: 0;
      }
      .flex {
        display: flex;
      }
      .flex > div {
        flex: 1;
      }
    </style>
  </head>
  <body>
    <h1>Base64编码和解码</h1>
    <div>传递参数转码时需要使用</div>
    <div>
      Base64编码要求把3个8位字节（3*8=24）转化为4个6位的字节（4*6=24），之后在6位的前面补两个0，形成8位一个字节的形式。
      如果剩下的字符不足3个字节，则用0填充，输出字符使用'='，因此编码后输出的文本末尾可能会出现1或2个'='。
    </div>
    <div class="flex">
      <div>
        <textarea name="" id="btoatext" cols="30" rows="10"></textarea>
        <button id="btoaBtn">btoa编码</button>
        <div>【编码】http://www.baidu.cn/path?id=123&name=jackson</div>
      </div>
      <div>
        <textarea name="" id="atobtext" cols="30" rows="10"></textarea>
        <button id="atobBtn">atob解码</button>
        <div>【解码】http://www.baidu.cn/path?id=123&name=jack%20son</div>
      </div>
    </div>
    <hr />
    <h1>encodeURIComponent/decodeURIComponent</h1>
    <div>传递参数转码时需要使用</div>
    <div>
      encodeURIComponent不编码字符有71个：!，
      '，(，)，*，-，.，_，~，0-9，a-z，A-Z
    </div>
    <div class="flex">
      <div>
        <textarea
          name=""
          id="encodeURIComponenttext"
          cols="30"
          rows="10"
        ></textarea>
        <button id="encodeURIComponentBtn">encodeURIComponent编码</button>
        <div>【编码】http://www.baidu.cn/path?id=123&name=jackson</div>
      </div>
      <div>
        <textarea
          name=""
          id="decodeURIComponenttext"
          cols="30"
          rows="10"
        ></textarea>
        <button id="decodeURIComponentBtn">decodeURIComponent解码</button>
        <div>【解码】http://www.baidu.cn/path?id=123&name=jack%20son</div>
      </div>
    </div>
    <hr />
    <h1>encodeURI/decodeURI</h1>
    <div>编码整个URI</div>
    <div>
      encodeURI不编码字符有82个：!，#，$，&，'，(，)，*，+，,，-，.，/，:，;，=，?，@，_，~，0-9，a-z，A-Z
    </div>
    <div class="flex">
      <div>
        <textarea name="" id="encodeURItext" cols="30" rows="10"></textarea>
        <button id="encodeURIBtn">encodeURI编码</button>
        <div>【编码】http://www.baidu.cn/path?id=123&name=jackson</div>
      </div>
      <div>
        <textarea name="" id="decodeURItext" cols="30" rows="10"></textarea>
        <button id="decodeURIBtn">decodeURI解码</button>
        <div>【解码】http://www.baidu.cn/path?id=123&name=jack%20son</div>
      </div>
    </div>

    <hr />
    <h1>escape/unescape</h1>
    <div>escape不编码字符有69个：*，+，-，.，/，@，_，0-9，a-z，A-Z</div>
    <div class="flex">
      <div>
        <textarea name="" id="escapetext" cols="30" rows="10"></textarea>
        <button id="escapeBtn">escape编码</button>
        <div>【编码】http://www.baidu.cn/path?id=123&name=jackson</div>
      </div>
      <div>
        <textarea name="" id="unescapetext" cols="30" rows="10"></textarea>
        <button id="unescapeBtn">unescape解码</button>
        <div>【解码】http://www.baidu.cn/path?id=123&name=jack%20son</div>
      </div>
    </div>

    <script>
      document.getElementById('btoaBtn').addEventListener('click', function () {
        let val1 = document.getElementById('btoatext').value
        console.log('val1=', val1)
        if (val1) {
          document.getElementById('atobtext').value = window.btoa(val1)
        } else {
          alert('请先输入要编码的内容！')
        }
      })
      document.getElementById('atobBtn').addEventListener('click', function () {
        let val2 = document.getElementById('atobtext').value
        console.log('val2=', val2)
        if (val2) {
          document.getElementById('btoatext').value = window.atob(val2)
        } else {
          alert('请先输入要解码的内容！')
        }
      })

      // encodeURIComponent/decodeURIComponent
      document
        .getElementById('encodeURIComponentBtn')
        .addEventListener('click', function () {
          let val1 = document.getElementById('encodeURIComponenttext').value
          console.log('val1=', val1)
          if (val1) {
            document.getElementById(
              'decodeURIComponenttext',
            ).value = encodeURIComponent(val1)
          } else {
            alert('请先输入要编码的内容！')
          }
        })
      document
        .getElementById('decodeURIComponentBtn')
        .addEventListener('click', function () {
          let val2 = document.getElementById('decodeURIComponenttext').value
          console.log('val2=', val2)
          if (val2) {
            document.getElementById(
              'encodeURIComponenttext',
            ).value = decodeURIComponent(val2)
          } else {
            alert('请先输入要解码的内容！')
          }
        })

      // encodeURI/decodeURI
      document
        .getElementById('encodeURIBtn')
        .addEventListener('click', function () {
          let val1 = document.getElementById('encodeURItext').value
          console.log('val1=', val1)
          if (val1) {
            document.getElementById('decodeURItext').value = encodeURI(val1)
          } else {
            alert('请先输入要编码的内容！')
          }
        })
      document
        .getElementById('decodeURIBtn')
        .addEventListener('click', function () {
          let val2 = document.getElementById('decodeURItext').value
          console.log('val2=', val2)
          if (val2) {
            document.getElementById('encodeURItext').value = decodeURI(val2)
          } else {
            alert('请先输入要解码的内容！')
          }
        })

      // escape/unescape
      document
        .getElementById('escapeBtn')
        .addEventListener('click', function () {
          let val1 = document.getElementById('escapetext').value
          console.log('val1=', val1)
          if (val1) {
            document.getElementById('unescapetext').value = escape(val1)
          } else {
            alert('请先输入要编码的内容！')
          }
        })
      document
        .getElementById('unescapeBtn')
        .addEventListener('click', function () {
          let val2 = document.getElementById('unescapetext').value
          console.log('val2=', val2)
          if (val2) {
            document.getElementById('escapetext').value = unescape(val2)
          } else {
            alert('请先输入要解码的内容！')
          }
        })
    </script>
  </body>
</html>
