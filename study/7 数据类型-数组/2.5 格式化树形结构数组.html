<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2.5 格式化树形结构数组</title>
  </head>
  <body>
    <script>
      /**
     * 将具有父子关系的原始数据格式化成树形结构数据
     * @param { Array } source 原始数据
     * @param { String } id 元素id对应的键名
     * @param { String } parentId 元素parentId对应的键名
     * @param { String } children 当前元素的子元素组合键名
     */
    function iterationData(source, id, parentId, children) {
      const cloneData = JSON.parse(JSON.stringify(source)) // 对源数据深度克隆
      return cloneData.filter(father => { // 循环所有项，并添加children属性
        const branchArr = cloneData.filter(child => father[id] === child[parentId]) // 返回每一项的子级数组
        console.log('branchArr', branchArr)
        branchArr.length > 0 ? father[children] = branchArr : '' // 给父级添加一个children属性，并赋值
        return father[parentId] === 0 // 如果第一层不是parentId=0，请自行修改
      })
    }
    </script>
  </body>
</html>
