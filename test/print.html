<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>测试打印</title>
</head>
<body>
  <button onclick="printfun()">测试打印</button><hr>
    <!--startprint-->
    <img src="../images/xkz.png" />
    <!--endprint-->
    <script type="text/javascript">
      function printfun() {
        const bodyHtml = window.document.body.innerHTML;
        //定义打印区域起始字符，根据这个截取网页局部内容
        const sprnstr = "<!--startprint-->"; // 打印区域开始的标记
        const eprnstr = "<!--endprint-->"; // 打印区域结束的标记
        const printHtml = bodyHtml.substring(bodyHtml.indexOf(sprnstr) + 17, bodyHtml.indexOf(eprnstr))
        console.log(printHtml);
        //还原网页内容
        window.document.body.innerHTML = printHtml;
        //开始打印
        window.print()
        console.log("打印完成")
        window.location.reload()
      }
    </script>
</body>
</html>