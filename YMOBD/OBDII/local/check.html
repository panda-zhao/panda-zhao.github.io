<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>local国际化校验</title>
</head>

<body>
  <div id="container"></div>
  <script src="./zh-Hans.js"></script>
  <!-- <script src="./es.js"></script> -->
  <!-- <script src="./pt.js"></script> -->
  <!-- <script src="./de.js"></script> -->
  <!-- <script src="./fr.js"></script> -->
  <!-- <script src="./nl.js"></script> -->
  <!-- <script src="./fi.js"></script> -->
  <!-- <script src="./zh-Hant.js"></script> -->
  <!-- <script src="./pl.js"></script> -->
  <script src="./bn.js"></script>
  <script>
    /**
     * 原始文件命名为 cn
     * 所有估计话翻译文件命名为i8n
     **/
    
    try {
      console.log(cn)
      console.log(i18n)
      // 1 梳理cn所有的key
      let cn_keys = Object.keys(cn)
      for (const key in cn) {
        const element = cn[key];
        if(typeof(element)  == 'object' && element.constructor == Object){
          cn_keys = cn_keys.concat(Object.keys(element))
        }
      }
      // 合并重复值
      cn_keys = Array.from(new Set(cn_keys))

      let codeLength = 0
      let errLength = 0
      for (const key in i18n) {
        codeLength++
        if(!cn_keys.includes(key)){
          errLength++
          document.getElementById('container').innerHTML += `<div>发现错误1，不在标准库: <span style="color: red">${key}</span> </div>`
        }
        const element = i18n[key];
        if(typeof(element)  == 'object' && element.constructor == Object){
          let subKeys = Object.keys(element)
          subKeys.forEach(item=>{
            codeLength++
            if(!cn_keys.includes(item)){
              errLength++
              document.getElementById('container').innerHTML += `<div>发现错误2，不在标准库: ${key} - <span style="color: red"> ${item} </span> </div>`
            }
          })
        }
      }

      if(errLength === 0){
        document.getElementById('container').innerHTML = `<div>检查 447- <span style="color: green">${codeLength}</span> 条数据无问题</div>`
      }
    } catch (error) {
      console.error('检查程序有误')
    }
  
    
    // const i18n_keys = Object.keys(i18n)
    // i18n_keys.forEach(item=>{
    //   codeLength++
    //   if(!cn_keys.includes(item)){
    //     // console.log('发现错误1，不在标准库', item)
    //     errLength++
    //     document.getElementById('container').innerHTML += `发现错误1，不在标准库: ${item} <br>`
    //   }
    // })

    // // 2 检查所有对象的key是否正确
    // for (const key in i18n) {
    //   const element = i18n[key];
    //   let value_keys = Object.keys(element)
    //   if(!value_keys.includes('zzs') || !value_keys.includes('dm') || !value_keys.includes('des') || !value_keys.includes('sys') || !value_keys.includes('zs')){
    //     errLength++
    //     document.getElementById('container').innerHTML += `发现错误2，缺少键：${key}, ${JSON.stringify(element)} <br>`
    //     // console.log('发现错误2，缺少键', key, element)
    //   }
    // }
    // if(errLength === 0){
    //   document.getElementById('container').innerHTML = `检查 ${codeLength} 条数据无问题`
    // }
  </script>
</body>

</html>