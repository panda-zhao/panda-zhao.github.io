<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>宝马</title>
</head>

<body>
  <div id="container"></div>
  <script src="./cn_dtc_BMW_A.js"></script>
  <script src="./cn_dtc_BMW_C.js"></script>
  <script src="./en_dtc_BMW_A.js"></script>
  <script src="./en_dtc_BMW_C.js"></script>
  <script>
    

      console.log('加载完成', cn)
      // 格式化四位故障
      format_4()
      function format_4(){
        let result = {}
        let _source = en
        for (const key in _source) {
          const element = _source[key];
          if(Array.isArray(element)){
            let _code = key.substring(key.length - 4)
            // console.log(_code)
            let _des =  element[1]
            if(result[_code] === undefined ){
              result[_code] = _des
            }else{
              // console.log("重复key跳过", key, element)
            }
          }else{
            console.log("注意： 该项不是数组，抛弃", key, element)
          }
        }
        document.getElementById('container').innerHTML += `处理完成，<br>${JSON.stringify(result)}<br>`
      }

      // format_6()
      // function format_6(){
      //   let result = {}
      //   let _source = en_6
      //   for (const key in _source) {
      //     const element = _source[key];
      //     if(Array.isArray(element)){
      //       let _code = key.substring(key.length - 6)
      //       // console.log(_code)
      //       let _des =  element[1]
      //       if(result[_code] === undefined ){
      //         result[_code] = _des
      //       }else{
      //         console.log("重复key跳过", key, element)
      //       }
      //     }else{
      //       console.log("注意： 该项不是数组，抛弃", key, element)
      //     }
      //   }
      //   document.getElementById('container').innerHTML += `处理完成，<br>${JSON.stringify(result)}<br>`
      // }

      // getID()
      //  function getID(code) {
      //   // 带状态位故障码 13256个 处理完3641个
      //   let json = {}
      //   // _data为故障码code和对应故障码解释库的ID
      //   let message = en // 故障码解释库 cn en
      //   _data.forEach((item, index)=>{
      //     if( item.F.length !== 1 || item.G.length !== 6 || item.L.length !== 6 ){
      //       document.getElementById('container').innerHTML += `有异常数据: ${item.A}<br>`
      //     }
      //     let code = item.F + item.G.substring(2) // 如 P && 0x0780  => P0780
      //     let seek = item.L.substring(0, 4) // 如  0xBABE => 0xBA
      //     let _chunk = (seek ^ '0x54').toString(16).toUpperCase() // EE
      //     while(_chunk.length<2){
      //       _chunk = '0' + _chunk
      //     }
      //     let _id = "0x1FC1D2E3" + _chunk + item.L.substring(4) // 0x1FC1D2E3EEBE
      //     // console.log((index+1) + '解析结果', seek, _chunk,_id)
      //     if(!json[code]){
      //       if(!message[_id]){
      //         console.log("注意： 无此id", _id)
      //       }
      //       json[code] = message[_id] 
      //     }
      //   })
        
      //   document.getElementById('container').innerHTML += `处理完成，<br>${JSON.stringify(json)}<br>`
      // }

  </script>
</body>

</html>